"use strict";(self.webpackChunksakiademo=self.webpackChunksakiademo||[]).push([[8980],{7934:(J,b,d)=>{d.d(b,{G:()=>Z});var h=d(5861),t=d(4946),C=d(7664),v=d(6113),e=d(5219),k=d(6814),A=d(707),M=d(4104);function f(u,_){if(1&u){const p=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(p);const n=t.oxw();return t.KtG(n.onSaveClick())}),t.qZA()}}function T(u,_){if(1&u){const p=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(p);const n=t.oxw();return t.KtG(n.onGridClick())}),t.qZA()}}function S(u,_){if(1&u){const p=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(p);const n=t.oxw();return t.KtG(n.onAddNewClick())}),t.qZA()}}function x(u,_){if(1&u){const p=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(p);const n=t.oxw();return t.KtG(n.onClearClick())}),t.qZA()}}function w(u,_){if(1&u){const p=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(p);const n=t.oxw();return t.KtG(n.onEditClick())}),t.qZA()}}function N(u,_){if(1&u){const p=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(p);const n=t.oxw();return t.KtG(n.onSaveApproveClick())}),t.qZA()}}function E(u,_){if(1&u){const p=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(p);const n=t.oxw();return t.KtG(n.onSavePrintClick())}),t.qZA()}}let Z=(()=>{var u;class _{constructor(s,n,g,i){this._router=s,this._service=n,this._activatedRoute=g,this._messageService=i,this.pageTitle="",this.onSubmit=!1,this.onGrid=!1,this.onAddNew=!1,this.onClear=!1,this.onEdit=!1,this.onView=!1,this.export=!1,this.redirectToGrid=!1,this.onSaveApprove=!1,this.onSavePrint=!1,this.gridClick=new t.vpe,this.addNewClick=new t.vpe,this.clearClick=new t.vpe,this.editClick=new t.vpe,this.viewClick=new t.vpe,this.submitClick=new t.vpe,this.saveApproveClick=new t.vpe,this.savePrintClick=new t.vpe,this.routerAddNew="",this.routerGridView="",this.gridCols=[],this.mastersGridColumns=[],this.gridData=[],this.exportColumns=[]}ngOnInit(){var s=this;return(0,h.Z)(function*(){0==Object.keys(s._service.appConfig).length&&(yield s._service.getConfigData()),console.log(s),s._activatedRoute.paramMap.subscribe(function(){var n=(0,h.Z)(function*(g){let i=g.get("params");if(null!=i&&null!=i){let a=JSON.parse(atob(i)),l=s._service.getDocPermissions(a).subscribe(o=>{l=o.data[0],s.permissions(a,l)})}else s._router.navigate(["/home"],{relativeTo:s._activatedRoute})});return function(g){return n.apply(this,arguments)}}())})()}permissions(s,n){console.log("aaa",s),null!=s&&null!=s&&(this.pageTitle=n.documentname,this.docAccSubmit=n.docAccSubmit,this.docAccGridView=n.docAccGridView,this.docAccAddNew=n.docAccAddNew,this.docAccClear=n.docAccClear,this.docAccEdit=n.docAccEdit,this.docAccView=n.docAccView,this.docAccExport=n.docAccExport,this.routerAddNew=`/home/${n.documentpageurl}`,this.routerGridView=`/home/${n.documentgridUrl}`,this.docParams=s,this.docAccPer=n)}onGridClick(){this.gridClick.emit(!0);let s=btoa(JSON.stringify(this.docParams));btoa(JSON.stringify(this.docAccPer)),this._router.navigate([this.routerGridView,{params:s}],{relativeTo:this._activatedRoute})}onAddNewClick(){this.addNewClick.emit(!0);let s=btoa(JSON.stringify(this.docParams));this._router.navigate([this.routerAddNew,{params:s}],{relativeTo:this._activatedRoute})}onClearClick(){this.clearClick.emit(!0)}onEditClick(){this.editClick.emit(!0)}onViewClick(){this.viewClick.emit(!0)}onSaveClick(){this.submitClick.emit(!0)}onMessageClose(){1==this.redirectToGrid&&this.onGridClick()}onSaveApproveClick(){this.saveApproveClick.emit(!0)}onSavePrintClick(){}}return(u=_).\u0275fac=function(s){return new(s||u)(t.Y36(C.F0),t.Y36(v.f),t.Y36(C.gz),t.Y36(e.ez))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-header"]],inputs:{pageTitle:"pageTitle",onSubmit:"onSubmit",onGrid:"onGrid",onAddNew:"onAddNew",onClear:"onClear",onEdit:"onEdit",onView:"onView",export:"export",redirectToGrid:"redirectToGrid",onSaveApprove:"onSaveApprove",onSavePrint:"onSavePrint"},outputs:{gridClick:"gridClick",addNewClick:"addNewClick",clearClick:"clearClick",editClick:"editClick",viewClick:"viewClick",submitClick:"submitClick",saveApproveClick:"saveApproveClick",savePrintClick:"savePrintClick"},decls:13,vars:8,consts:[[1,"flex","justify-content-between","flex-wrap","p-1",2,"background-image","linear-gradient(to bottom right , var(--primary-50),var(--primary-100))"],[1,"flex","align-items-center","justify-content-center","font-bold","border-round","m-2"],[1,"text-primary",2,"text-align","center"],[1,"flex","align-items-center","justify-content-center","font-bold","border-round","gap-1"],["pButton","","pRipple","","label","Submit",3,"click",4,"ngIf"],["pButton","","pRipple","","label","GridView",3,"click",4,"ngIf"],["pButton","","pRipple","","label","Add New",3,"click",4,"ngIf"],["pButton","","pRipple","","label","Clear",3,"click",4,"ngIf"],["pButton","","pRipple","","label","Edit",3,"click",4,"ngIf"],["pButton","","pRipple","","label","Save & Approve",3,"click",4,"ngIf"],["pButton","","pRipple","","label","Save & Print",3,"click",4,"ngIf"],[3,"onClose"],["pButton","","pRipple","","label","Submit",3,"click"],["pButton","","pRipple","","label","GridView",3,"click"],["pButton","","pRipple","","label","Add New",3,"click"],["pButton","","pRipple","","label","Clear",3,"click"],["pButton","","pRipple","","label","Edit",3,"click"],["pButton","","pRipple","","label","Save & Approve",3,"click"],["pButton","","pRipple","","label","Save & Print",3,"click"]],template:function(s,n){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span",2),t._uU(3),t.qZA()(),t.TgZ(4,"div",3),t.YNc(5,f,1,0,"button",4),t.YNc(6,T,1,0,"button",5),t.YNc(7,S,1,0,"button",6),t.YNc(8,x,1,0,"button",7),t.YNc(9,w,1,0,"button",8),t.YNc(10,N,1,0,"button",9),t.YNc(11,E,1,0,"button",10),t.qZA()(),t.TgZ(12,"p-toast",11),t.NdJ("onClose",function(){return n.onMessageClose()}),t.qZA()),2&s&&(t.xp6(3),t.hij(" ",n.pageTitle,""),t.xp6(2),t.Q6J("ngIf",n.onSubmit&&n.docAccSubmit),t.xp6(1),t.Q6J("ngIf",n.onGrid&&n.docAccGridView),t.xp6(1),t.Q6J("ngIf",n.onAddNew&&n.docAccAddNew),t.xp6(1),t.Q6J("ngIf",n.onClear&&n.docAccClear),t.xp6(1),t.Q6J("ngIf",n.onEdit&&n.docAccEdit),t.xp6(1),t.Q6J("ngIf",n.onSaveApprove),t.xp6(1),t.Q6J("ngIf",n.onSavePrint))},dependencies:[k.O5,A.Hq,M.FN]}),_})()},8980:(J,b,d)=>{d.r(b),d.d(b,{ModuledocumentModule:()=>g});var h=d(6814),t=d(5861),C=d(6990),v=d(7934),e=d(4946),k=d(6113),A=d(5219),M=d(95),f=d(9232),T=d(8057);function S(i,a){1&i&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Modules"),e.qZA()())}function x(i,a){if(1&i){const l=e.EpF();e.TgZ(0,"tr",10)(1,"td",11)(2,"p-checkbox",12),e.NdJ("ngModelChange",function(c){const m=e.CHM(l).$implicit;return e.KtG(m.selected=c)})("click",function(){const r=e.CHM(l).$implicit,m=e.oxw();return e.KtG(m.onSelectmodule(r,r.selected))}),e.qZA(),e._uU(3),e.qZA()()}if(2&i){const l=a.$implicit;e.Q6J("pSelectableRow",l),e.xp6(1),e.Q6J("ngClass",1==l.selected?"grid-selected-row":null),e.xp6(1),e.Q6J("ngModel",l.selected)("binary",!0),e.xp6(1),e.hij(" ",l.modulename," ")}}function w(i,a){1&i&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Sub Modules"),e.qZA()())}function N(i,a){if(1&i){const l=e.EpF();e.TgZ(0,"tr",10)(1,"td",11)(2,"p-checkbox",12),e.NdJ("ngModelChange",function(c){const m=e.CHM(l).$implicit;return e.KtG(m.selected=c)})("click",function(){const r=e.CHM(l).$implicit,m=e.oxw();return e.KtG(m.onSelectSubmodule(r,r.selected))}),e.qZA(),e._uU(3),e.qZA()()}if(2&i){const l=a.$implicit;e.Q6J("pSelectableRow",l),e.xp6(1),e.Q6J("ngClass",1==l.selected?"grid-selected-row":null),e.xp6(1),e.Q6J("ngModel",l.selected)("binary",!0),e.xp6(1),e.AsE(" ",l.submodulename," ",l.selected," ")}}function E(i,a){if(1&i&&(e.TgZ(0,"th"),e._UZ(1,"p-columnFilter",14),e.qZA()),2&i){const l=a.$implicit;e.xp6(1),e.Q6J("field",l.field)}}function Z(i,a){if(1&i&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Documents"),e.qZA()(),e.TgZ(3,"tr"),e.YNc(4,E,2,1,"th",13),e.qZA()),2&i){const l=a.$implicit;e.xp6(4),e.Q6J("ngForOf",l)}}function u(i,a){if(1&i){const l=e.EpF();e.TgZ(0,"tr",10)(1,"td")(2,"p-checkbox",12),e.NdJ("ngModelChange",function(c){const m=e.CHM(l).$implicit;return e.KtG(m.selected=c)})("click",function(){const r=e.CHM(l).$implicit,m=e.oxw();return e.KtG(m.onSelectDocuments(r,r.selected))}),e.qZA(),e._uU(3),e.qZA()()}if(2&i){const l=a.$implicit;e.Q6J("pSelectableRow",l),e.xp6(2),e.Q6J("ngModel",l.selected)("binary",!0),e.xp6(1),e.AsE(" ",l.document," ",l.selected," ")}}let _=(()=>{var i;class a{constructor(o){this._service=o,this.pageTitle="Module",this.onSubmit=!0,this.onGrid=!0,this.onAddNew=!0,this.modulesLists=[],this.subModulesLists=[],this.documentLists=[],this.selectedModule=[],this.selectedSubModule=[],this.selectedDocuments=[],this.selectmodulesLists=[],this.filterSubmodule=[],this.modDoc=[]}ngOnInit(){var o=this;return(0,t.Z)(function*(){0==Object.keys(o._service.appConfig).length&&(yield o._service.getConfigData()),o.modulesLists=o._service.serGetData("getModules").subscribe(c=>(console.log(c),o.modulesLists=c.data,C.forEach(o.modulesLists,(r,m)=>{r.selected=!1}))),o.documentLists=o._service.serGetData("documents").subscribe(c=>(console.log(c),o.documentLists=c.data,C.forEach(o.documentLists,(r,m)=>{r.selected=!1})))})()}onSelectmodule(o,c){this.subModulesLists=[],1==c&&(this.selectmodulesLists=this._service.serGetSelectedDataobject("getModuleDocuments",o).subscribe(r=>{console.log(r),this.selectmodulesLists=r.data,this.selectGetModule(o,c)}))}selectGetModule(o,c){this.selectedModule=o,this.filterSubmodule=[],this.filterSubmodule=C.filter(this.selectmodulesLists,{moduleid:o.moduleid}),this.subModulesLists=o.submodel,C.filter(this.filterSubmodule,(r,m)=>{null==r.submoduleid&&this.onSelectSubmodule(null,!1)})}onSelectSubmodule(o,c){this.selectedSubModule=[],this.selectedSubModule=o,this.filterSubmodule.length>0&&C.filter(this.filterSubmodule,(r,m)=>{C.filter(this.documentLists,(G,H)=>{r.documentid==G.documentid&&(G.selected=r.documentstatus)})})}onSelectDocuments(o,c){this.modDoc.push({moduledocMapid:0,moduleid:this.selectedModule.moduleid,modulename:this.selectedModule.modulename,submoduleid:null==this.selectedSubModule?null:this.selectedSubModule._id,submodulename:null==this.selectedSubModule?null:this.selectedSubModule.submodulename,documentid:o.documentid,documentname:o.document,documentstatus:o.selected,documentpageurl:o.documentpageurl,documentgridUrl:o.documentgridUrl})}onGridClick(){}onSaveClick(){let o=[];o=this.modDoc,this._service.onSaveJson(this.pageTitle,"insertModuleDocuments",o),this.onClearClick()}onClearClick(){this.selectedModule.selected=!1,this.selectedSubModule.selected=!1,C.forEach(this.selectedDocuments,(o,c)=>{o.selected=!1})}}return(i=a).\u0275fac=function(o){return new(o||i)(e.Y36(k.f))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-moduledocument"]],viewQuery:function(o,c){if(1&o&&e.Gf(v.G,5),2&o){let r;e.iGM(r=e.CRH())&&(c.header=r.first)}},decls:20,vars:22,consts:[[1,""],[3,"pageTitle","onSubmit","onGrid","onAddNew","gridClick","submitClick","clearClick"],["header",""],[1,"grid"],[1,"col","p-4"],["styleClass","p-datatable-gridlines","scrollHeight","400px","selectionMode","single",3,"value","paginator","rows","responsive","resizableColumns","scrollable"],["dt",""],["pTemplate","header"],["pTemplate","body"],["styleClass","p-datatable-gridlines","scrollHeight","400px","selectionMode","multiple",3,"value","paginator","rows","responsive","resizableColumns","scrollable"],[3,"pSelectableRow"],[3,"ngClass"],["inputId","binary",3,"ngModel","binary","ngModelChange","click"],[4,"ngFor","ngForOf"],["type","text",3,"field"]],template:function(o,c){1&o&&(e.TgZ(0,"div",0)(1,"div")(2,"app-header",1,2),e.NdJ("gridClick",function(){return c.onGridClick()})("submitClick",function(){return c.onSaveClick()})("clearClick",function(){return c.onClearClick()}),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4)(6,"p-table",5,6),e.YNc(8,S,3,0,"ng-template",7),e.YNc(9,x,4,5,"ng-template",8),e.qZA()(),e.TgZ(10,"div",4)(11,"p-table",5,6),e.YNc(13,w,3,0,"ng-template",7),e.YNc(14,N,4,6,"ng-template",8),e.qZA()(),e.TgZ(15,"div",4)(16,"p-table",9,6),e.YNc(18,Z,5,1,"ng-template",7),e.YNc(19,u,4,5,"ng-template",8),e.qZA()()()()),2&o&&(e.xp6(2),e.Q6J("pageTitle",c.pageTitle)("onSubmit",c.onSubmit)("onGrid",c.onGrid)("onAddNew",c.onAddNew),e.xp6(4),e.Q6J("value",c.modulesLists)("paginator",!1)("rows",25)("responsive",!0)("resizableColumns",!0)("scrollable",!0),e.xp6(5),e.Q6J("value",c.subModulesLists)("paginator",!1)("rows",25)("responsive",!0)("resizableColumns",!0)("scrollable",!0),e.xp6(5),e.Q6J("value",c.documentLists)("paginator",!1)("rows",25)("responsive",!0)("resizableColumns",!0)("scrollable",!0))},dependencies:[h.mk,h.sg,A.jx,M.JJ,M.On,f.iA,f.Ei,f.xl,T.XZ,v.G]}),a})();var p=d(7664),s=d(8032);const n=[{path:"",component:_}];let g=(()=>{var i;class a{}return(i=a).\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.ez,s.u,p.Bz.forChild(n)]}),a})()}}]);